1 '8010 RETURN 86
10 SCREEN2,2 :COLOR 15,1,1:DEFINT A-Z
15 DEFUSR3=&H90:DEFUSR1=&H41:DEFUSR2=&H44
20 ' BLOAD"xbasic.bin",R
28 RESTORE 10010:FOR R=0 TO 575:READ I: VPOKE &H3800+R,I:NEXT R    ' carga sprites en vram
30 ZZ=USR1(0):RESTORE14070:GOSUB14010
40 OPEN"grp:"AS#1:FORR=0TO1:PRESET(0,182+R):PRINT#1,"SPEED":NEXT:CLOSE#1:F=1
70 _TURBOON(F)
80 DIM Z(10),E(2):GR=1
85 ON KEY GOSUB9000:KEY(1)ON
95 GOSUB6000:ZZ=USR2(0)
100 S=STICK(0)
110 ONSGOTO120,140,140,140,130:GOTO140
120 Y=Y-1:IFY<65THENY=65ELSEGOTO140
130 Y=Y+1:IFY+16>128THENY=111
140 PUTSPRITE9,(X,Y),&HF,P:PUTSPRITE10,(X,Y),&H9,&H1:W=W+1:IFW>8THENSWAPP,O:W=0
142 '        simulacion scroll con sprites
150 FORR=0TO2:PUTSPRITER,(Z(R),39),&H8,&H10:Z(R)=Z(R)-1:NEXTR  ' arbol arriba
155 FORR=3TO5:PUTSPRITER,(Z(R),135),&H8,&H0:Z(R)=Z(R)-1:NEXTR ' arbol abajo
160 PUTSPRITE12,(Z(7),71),&HC,&H6:Z(7)=Z(7)-1 'saliente1,1
161 PUTSPRITE13,(Z(8),71),&HC,&H6:Z(8)=Z(8)-1  'saliente1,2
162 PUTSPRITE14,(Z(9),113),&HC,&H5:Z(9)=Z(9)-1  'saliente2,1
163 PUTSPRITE15,(Z(10),113),&HC,&H5:Z(10)=Z(10)-1  'saliente2,2
169 '   colision con bordes
170 IF(Y+8)>70AND(Y+8)<86THENIF(X+10)>Z(7)AND(X+10)<Z(7)+16THENGOSUB8000
171 IF(Y+10)>70AND(Y+10)<86THENIF(X+10)>Z(8)AND(X+10)<Z(8)+16THENGOSUB8000
172 IF(Y+14)>114AND(Y+14)<128THENIF(X+10)>Z(9)AND(X+10)<Z(9)+16THENGOSUB8000
173 IF(Y+14)>114AND(Y+14)<128THENIF(X+10)>Z(10)AND(X+10)<Z(10)+16THENGOSUB8000
190 FORT=0TOC:NEXTT  ' retardo para scroll
200 ONFGOSUB500,600   ' vamos al loop de cada fase
210 IFZ(0)<-15THENZ(0)=255:C=C-20:SD=SD+1:SOUND6,SD:LINE(LN,180)-(LN+2,190),15,BF:LN=LN+4:IFC=240GOTO9000ELSEGOTO100
220 IFZ(1)<-15THENZ(1)=255:GOTO100
230  IFZ(2)<-15THENZ(2)=255:GOTO100
240  IFZ(3)<-15THENZ(3)=255:GOTO100
250  IFZ(4)<-15THENZ(4)=255:GOTO100
260  IFZ(5)<-15THENZ(5)=255:GOTO100
270  IFZ(6)<-15THENZ(6)=255:GOTO100
275  IFZ(7)<-15THENZ(7)=255:GOTO100
276  IFZ(8)<-15THENZ(8)=255:GOTO100
277  IFZ(9)<-15THENZ(9)=255:GOTO100
278  IFZ(10)<-15THENZ(10)=255:GOTO100
280 GOTO 100
499 ' fase1
500 PUTSPRITE20,(E(0),L),14,J:E(0)=E(0)-1:IFE(0)<-15THENE(0)=255:L=INT(RND(1)*12)+86
510 Q=Q+1:IFQ>10THENSWAPJ,K:Q=0
520 IF(X+8)>E(0)AND(X+8)<E(0)+16THENIF(Y+16)>L+6AND(Y+16)<L+20THENGOSUB8000
530 RETURN
599 ' fase  2
600 PUTSPRITE20,(E(0),L),7,K:E(0)=E(0)-1:IFE(0)<-15THENE(0)=255
602 IFE(0)<-15THENE(0)=255
610 Q=Q+1:IFQ>8THENSWAPK,J:L=L+V:Q=0
620 IFL>101ORL<84THENV=-V
625 IF(X+8)>E(0)AND(X+8)<E(0)+16THENIF(Y+16)>L+6AND(Y+16)<L+20THENGOSUB8000
630 RETURN
5999 '   variables generales
6000 'iniciar variables de cada fase
6010 ON F GOTO 6020,6040 ' configurar fases
6020 X=60:Y=80:O=2:P=15:E(0)=127:F=1:L=90:Q=0:J=4:K=17:SD=0:LN=40:W=0:V1=2:V2=3:V3=12:V4=4:V5=7:ONGRGOSUB7010:SOUND8,10:SOUND6,SD:SOUND7,55:SOUND12,5:SOUND13,13
6030 Z(0)=80:Z(1)=160:Z(2)=255:Z(3)=20:Z(4)=100:Z(5)=180:Z(6)=210:Z(7)=64:Z(8)=192:Z(9)=128:Z(10)=255:C=300:RETURN  ' fase1
6040 X=60:Y=85:E(0)=255:F=2:L=85:SD=0:LN=40:Q=0:K=7:J=8:V=1:SOUND8,10:SOUND6,SD:SOUND7,55:SOUND12,5:SOUND13,13
6050 Z(0)=80:Z(1)=160:Z(2)=255:Z(3)=20:Z(4)=100:Z(5)=180:Z(6)=210:Z(7)=64:Z(8)=192:Z(9)=128:Z(10)=255:C=300:RETURN: ' fase2
6100 RETURN
6999 '         graficos
7010 LINE(6,48)-(255,48),V3:LINE(6,50)-(255,50),V3:LINE(5,54)-(254,54),V3:LINE(4,60)-(254,60),V3:LINE(3,68)-(253,70),V3,BF:LINE(3,71)-(253,71),V5
7020 LINE(1,136)-(252,136),V3:LINE(1,142)-(252,142),V3:LINE(0,152)-(251,152),V3:LINE(2,130)-(252,132),V3,BF
7030 LINE(3,72)-(253,72),V4:LINE-(252,129),V4:LINE-(2,129),V4:LINE-(3,72),V4:PAINT(100,80),V4:LINE(3,129)-(252,129),V5
7040 LINE(1,137)-(252,141),V1,BF:LINE(0,143)-(251,151),V2,BF:LINE(1,133)-(252,135),V1,BF
7050 LINE(6,49)-(255,49),V2:LINE(5,51)-(254,53),V2,BF:LINE(5,55)-(254,59),V1,BF:LINE(4,61)-(253,67),V2,BF:GR=0
7100 RETURN
7999 ' muerte
8000 ZZ=USR3(0):SOUND8,16:SOUND7,55:SOUND12,100:SOUND13,1:FORR=9TO10:PUTSPRITER,(1,215):NEXTR:FORR=0TO50:PUTSPRITE9,(X,Y),10,11:FORA=0TO200:NEXTA:PUTSPRITE9,(X,Y),8,12:FORA=0TO200:NEXTA:NEXTR:PUTSPRITE9,(1,215):TIME=0
8005 IF TIME<60  THEN8005
8007 ONFGOTO8010,8010
8010 LN=40:LINE(40,180)-(200,191),1,BF:RETURN95
8900 RETURN95
9000  _TURBO OFF
9010 ' cambio de fase
9020 F=F+1
9030 SOUND7,56:FORT=15TO0STEP-1:SOUND8,T:FORR=250TO0STEP-10:SOUND0,R:SOUND1,0:SOUND12,31:SOUND13,0:NEXTR:NEXTT
9100 GOTO 70
10000 REM spriver
10005 END
10010 REM SPRITE DATA
10020 DATA 0,144,96,32,16,24,15,3,1,3,1,1,1,2,3,7,65,82,50,98,196,132,152,240,224,160,64,192,128,192,192,224
10030 DATA 0,0,31,31,15,7,15,31,0,0,255,0,0,0,0,0,0,0,64,224,192,0,192,224,0,0,248,0,0,0,0,0
10040 DATA 7,15,0,0,0,0,96,128,255,255,0,255,127,31,0,204,128,224,0,0,0,0,62,1,255,254,0,248,240,192,64,128
10050 DATA 170,85,42,85,42,21,42,85,0,0,0,0,0,0,0,0,174,86,174,86,174,86,174,86,6,6,6,6,6,6,6,15
10060 DATA 0,0,0,0,3,15,26,29,59,119,215,183,239,95,33,24,0,0,0,0,0,128,64,224,224,240,176,88,168,253,8,198
10070 DATA 3,15,31,47,31,63,55,111,127,59,119,111,127,63,255,255,192,240,232,240,220,236,244,252,236,244,254,254,250,254,255,255
10080 DATA 255,255,127,119,111,95,123,119,47,125,59,55,63,29,11,3,255,255,254,246,250,252,236,244,216,232,248,248,216,232,240,192
10090 DATA 0,0,6,24,37,88,131,36,164,130,88,39,16,7,0,0,0,0,192,24,228,26,133,32,37,197,26,228,24,96,0,0
10100 DATA 0,0,3,16,3,24,130,36,0,35,72,5,16,2,0,0,0,0,64,16,64,26,65,4,32,5,10,96,8,128,0,0
10110 DATA 63,118,124,27,39,121,110,126,54,28,33,62,127,109,63,14,92,248,116,142,254,190,246,254,196,56,236,254,126,182,62,124
10120 DATA 7,11,10,7,0,0,31,47,42,29,0,0,127,191,170,117,254,255,175,86,0,0,248,252,188,88,0,0,224,240,240,96
10130 DATA 0,1,10,16,33,42,2,8,48,65,13,32,32,26,1,0,0,128,88,4,0,88,132,0,146,34,36,64,4,72,144,0
10140 DATA 0,8,18,0,36,0,20,66,8,34,0,5,16,5,0,0,0,128,32,4,138,64,20,130,64,20,32,4,0,16,64,0
10150 DATA 0,0,0,7,15,29,27,21,63,63,119,111,87,238,222,253,0,0,0,0,128,192,224,224,240,248,192,184,124,238,223,255
10160 DATA 253,222,238,87,111,119,63,63,21,27,29,15,7,0,0,0,255,223,238,124,184,192,248,240,224,224,192,128,0,0,0,0
10170 DATA 7,15,0,0,0,0,112,128,255,255,0,255,127,31,65,8,160,192,0,0,0,0,30,1,255,254,0,248,240,192,0,0
10180 DATA 0,0,0,0,16,24,12,2,2,1,1,1,1,1,3,5,0,0,0,0,68,196,152,176,224,128,128,128,128,128,128,192
10190 DATA 0,0,0,0,3,15,26,29,59,119,215,183,239,95,0,16,0,0,0,0,0,128,64,224,224,240,176,88,169,252,8,129
14010 CLS
14020 FOR I=6144 TO 6399:READ A:VPOKE I,A:NEXT :'Pantalla bloque 1
14030 FOR I=0 TO 135:READ A:VPOKE I, A:NEXT :'tileset bloque 1
14040 FOR I=8192 TO 8327:READ A:VPOKE I, A:NEXT :' color tileset1
14050 RETURN
14060 ' pantalla bloque 1
14070 DATA &h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00
14080 DATA &h00,&h01,&h02,&h00,&h00,&h00,&h03,&h00,&h00,&h00,&h00,&h00,&h00,&h00,&h03,&h00,&h00,&h01,&h02,&h00,&h00,&h00,&h00,&h03,&h00,&h00,&h00,&h00,&h00,&h01,&h02,&h00
14090 DATA &h00,&h00,&h00,&h00,&h00,&h07,&h08,&h09,&h00,&h00,&h01,&h02,&h00,&h07,&h08,&h09,&h00,&h00,&h00,&h00,&h00,&h00,&h07,&h08,&h09,&h00,&h01,&h02,&h00,&h00,&h00,&h00
14100 DATA &h00,&h00,&h00,&h00,&h0a,&h04,&h05,&h06,&h0b,&h00,&h00,&h00,&h0a,&h04,&h05,&h06,&h0b,&h00,&h01,&h02,&h00,&h0a,&h04,&h06,&h06,&h0b,&h00,&h00,&h00,&h00,&h00,&h00
14110 DATA &h00,&h00,&h00,&h0a,&h0c,&h0c,&h0c,&h0c,&h0c,&h0b,&h00,&h0a,&h0c,&h0c,&h0c,&h0c,&h0c,&h0b,&h00,&h00,&h0a,&h0c,&h0c,&h0c,&h0c,&h0c,&h0b,&h00,&h00,&h00,&h00,&h00
14120 DATA &h00,&h00,&h0a,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0f,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0b,&h0a,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0b,&h00,&h00,&h00,&h00
14130 DATA &h00,&h0d,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0c,&h0e,&h00,&h00,&h00
14140 DATA &h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10,&h10
14150 REM - PGT-TILESET-1
14160 DATA &hff,&hff,&hff,&hff,&hff,&hff,&hff,&hff
14170 DATA &h30,&h7e,&h00,&h00,&h00,&h6f,&h06,&h00
14180 DATA &h00,&h00,&h7f,&h3f,&h3f,&h7f,&h00,&h00
14190 DATA &h00,&h00,&h00,&h00,&h00,&h00,&h78,&h01
14200 DATA &h39,&h7b,&h09,&h7b,&h00,&h00,&h00,&h00
14210 DATA &h4e,&h68,&h28,&h2c,&h24,&h00,&h00,&h00
14220 DATA &h18,&h4e,&h6e,&h67,&h33,&h40,&h00,&h00
14230 DATA &h07,&h0f,&h0f,&h0f,&h3f,&h3f,&h7f,&h00
14240 DATA &h00,&h40,&h08,&h00,&h00,&h77,&h18,&h58
14250 DATA &h00,&h7f,&h1f,&h07,&h03,&h03,&h01,&h00
14260 DATA &h01,&h07,&h0f,&h1f,&h3f,&h7f,&h7f,&h00
14270 DATA &h3f,&h1f,&h0f,&h07,&h07,&h03,&h03,&h01
14280 DATA &h00,&h00,&h00,&h00,&h00,&h00,&h00,&h00
14290 DATA &h01,&h03,&h07,&h0f,&h1f,&h3f,&h7f,&h00
14300 DATA &h7f,&h3f,&h1f,&h0f,&h07,&h03,&h01,&h00
14310 DATA &h3e,&h3e,&h1c,&h1c,&h08,&h08,&h00,&h00
14320 DATA &hff,&hff,&hff,&hff,&hff,&hff,&hff,&hff
16720 REM - CT-TILESET-1
16730 DATA &h77,&h77,&h77,&h77,&h77,&h77,&h77,&h77
16740 DATA &hf7,&hf7,&hff,&hff,&hff,&hf7,&hf7,&h77
16750 DATA &h77,&h77,&h7f,&h7f,&h7f,&h7f,&h77,&h77
16760 DATA &h77,&h77,&h77,&h77,&h77,&h77,&hf7,&h7f
16770 DATA &hfe,&hfe,&hef,&hef,&hee,&hee,&hee,&hee
16780 DATA &hfe,&hfe,&hfe,&hfe,&hfe,&hee,&hee,&hee
16790 DATA &hef,&hef,&hef,&hef,&hef,&hfe,&hee,&hee
16800 DATA &hf7,&hf7,&hf7,&hf7,&hf7,&hf7,&hf7,&hff
16810 DATA &hff,&hef,&hef,&hff,&hff,&hfe,&hef,&hef
16820 DATA &h77,&h7f,&h7f,&h7f,&h7f,&h7f,&h7f,&hff
16830 DATA &he7,&he7,&he7,&he7,&he7,&he7,&he7,&hee
16840 DATA &h7e,&h7e,&h7e,&h7e,&h7e,&h7e,&h7e,&h7e
16850 DATA &hee,&hee,&hee,&hee,&hee,&hee,&hee,&hee
16860 DATA &he7,&he7,&he7,&he7,&he7,&he7,&he7,&hee
16870 DATA &h7e,&h7e,&h7e,&h7e,&h7e,&h7e,&h7e,&hee
16880 DATA &h7e,&h7e,&h7e,&h7e,&h7e,&h7e,&hee,&hee
16890 DATA &hcc,&h22,&h22,&h22,&h22,&h22,&h22,&hcc
