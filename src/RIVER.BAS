10 SCREEN2,2 :COLOR 15,1,1:DEFINT A-Z
20 ' BLOAD"xbasic.bin",R
28 FOR R=0 TO 469:READ I: VPOKE &H3800+R,I:NEXT R    ' carga sprites en vram
70 _TURBOON
80 DIM Z(9):DEFUSR3=&H90:DEFUSR1=&H41:DEFUSR2=&H44
85 ON KEY GOSUB10000:KEY(1)ON
90 F=1:GOSUB 6000:GOSUB7010  ' carga  graficos fase 1
95 GOSUB 6010   ' iniciamos variables
100 S=STICK(0)
110 ONSGOTO120,140,140,140,130:GOTO140
120 Y=Y-1:IFY<65THENY=65ELSEGOTO140
130 Y=Y+1:IFY+16>128THENY=111
140 PUTSPRITE9,(X,Y),&HF,&H2:PUTSPRITE10,(X,Y),&H9,&H1
142 '        simulacion scroll con sprites
150 FORR=0TO1:PUTSPRITER,(Z(R),38),&H8,&H0:Z(R)=Z(R)-1:NEXTR  ' arbol arriba
155 FORR=2TO3:PUTSPRITER,(Z(R),135),&H8,&H0:Z(R)=Z(R)-1:NEXTR ' arbol abajo
160 PUTSPRITE12,(Z(4),70),&HC,&H6:Z(4)=Z(4)-1 'saliente1,1
161 PUTSPRITE13,(Z(5),70),&HC,&H6:Z(5)=Z(5)-1  'saliente1,2
162 PUTSPRITE14,(Z(6),113),&HC,&H5:Z(6)=Z(6)-1  'saliente2,1
163 PUTSPRITE15,(Z(7),113),&HC,&H5:Z(7)=Z(7)-1  'saliente2,2
169 '   colision con bordes
170 IF(Y+8)>70AND(Y+8)<86THENIF(X+10)>Z(4)AND(X+10)<Z(4)+16THENGOSUB8000
171 IF(Y+10)>70AND(Y+10)<86THENIF(X+10)>Z(5)AND(X+10)<Z(5)+16THENGOSUB8000
172 IF(Y+14)>114AND(Y+14)<128THENIF(X+10)>Z(6)AND(X+10)<Z(6)+16THENGOSUB8000
173 IF(Y+14)>114AND(Y+14)<128THENIF(X+10)>Z(7)AND(X+10)<Z(7)+16THENGOSUB8000
190 FORT=0TOC:NEXTT  ' retardo
200 ONFGOSUB500,600   ' vamos al loop de cada fase
210 IFZ(0)<0THENZ(0)=255:C=C-10:S=S+1:SOUND6,S:IFC=0GOTO10000ELSEGOTO100
220 IFZ(1)<0THENZ(1)=255:GOTO100
230 IFZ(2)<0THENZ(2)=255:GOTO100
240 IFZ(3)<0THENZ(3)=255:GOTO100
250 IFZ(4)<0THENZ(4)=255:GOTO100
260 IFZ(5)<0THENZ(5)=255:GOTO100
270 IFZ(6)<0THENZ(6)=255:GOTO100
275 IFZ(7)<0THENZ(7)=255:GOTO100
280 GOTO 100
499 ' fase1
500 PUTSPRITE20,(Z(8),L),7,K:Z(8)=Z(8)-1:IFZ(8)<0THENZ(8)=255:L=INT(RND(1)*16)+86
502 PUTSPRITE21,(Z(9),M),7,J:Z(9)=Z(9)-1:IFZ(9)<0THENZ(9)=255:M=INT(RND(1)*16)+86
505 IF(X+8)>Z(9)AND(X+8)<Z(9)+16THENIF(Y+14)>MAND(Y+14)<M+16THENGOSUB8000
510 Q=Q+1:IFQ>8THENSWAPK,J:Q=0
520 IF(X+8)>Z(8)AND(X+8)<Z(8)+16THENIF(Y+14)>LAND(Y+14)<L+16THENGOSUB8000
530 RETURN
599 ' fase  2
600 PUTSPRITE20,(Z(8),L),14,4:Z(8)=Z(8)-1:IFZ(8)<0THENZ(8)=255:L=INT(RND(1)*16)+86
620 IF(X+8)>Z(8)AND(X+8)<Z(8)+16THENIF(Y+16)>L+6AND(Y+16)<L+20THENGOSUB8000
630 RETURN
5999 '   variables generales
6000 V1=2:V2=3:V3=12:V4=4:V5=7:RETURN   'colores graficos etapa 1
6010 ON F GOTO 6020     ' configurar fases
6020 X=60:Y=80:Z(8)=255:Z(9)=127:F=1:J=7:K=8:L=95:M=90:S=0:SOUND8,10:SOUND6,S:SOUND7,55:SOUND12,5:SOUND13,13
6030 Z(0)=127:Z(1)=255:Z(2)=64:Z(3)=(192):Z(4)=64:Z(5)=192:Z(6)=128:Z(7)=255:C=250
6100 RETURN
6999 '         graficos
7010 LINE(6,48)-(255,48),V3:LINE(6,50)-(255,50),V3:LINE(5,54)-(254,54),V3:LINE(4,60)-(254,60),V3:LINE(3,68)-(253,70),V3,BF:LINE(3,71)-(253,71),V5
7020 LINE(1,136)-(252,136),V3:LINE(1,142)-(252,142),V3:LINE(0,152)-(251,152),V3:LINE(2,130)-(252,132),V3,BF
7030 LINE(3,72)-(253,72),V4:LINE-(252,129),V4:LINE-(2,129),V4:LINE-(3,72),V4:PAINT(100,80),V4:LINE(3,129)-(252,129),V5
7040 LINE(1,137)-(252,141),V1,BF:LINE(0,143)-(251,151),V2,BF:LINE(1,133)-(252,135),V1,BF
7050 LINE(6,49)-(255,49),V2:LINE(5,51)-(254,53),V2,BF:LINE(5,55)-(254,59),V1,BF:LINE(4,61)-(253,67),V2,BF
7100 RETURN
7999 ' muerte
8000 x=0:y=100:ZZ=USR3(0):SOUND8,16:SOUND7,55:SOUND12,100:SOUND13,1:FORR=9TO10:PUTSPRITER,(1,215):NEXTR:FORR=0TO50:PUTSPRITE9,(X,Y),10,11:FORA=0TO200:NEXTA:PUTSPRITE9,(X,Y),8,12:FORA=0TO200:NEXTA:NEXTR:PUTSPRITE9,(1,215):TIME=0:T=C
8005 IF TIME<60  THEN8005
1 '8010 RETURN 86
8010 RETURN 
10000 _TURBO OFF
10005 END
10010 REM SPRITE DATA
10020 DATA 0,144,96,32,16,24,15,3,1,3,1,1,1,2,3,7,65,82,50,98,196,132,152,240,224,160,64,192,128,192,192,224: 'arbol
10030 DATA 0,0,15,15,7,3,15,31,0,0,255,0,0,0,0,0,0,0,160,240,224,128,224,240,0,0,248,0,0,0,0,0: ' cuerpo hombre
10040 DATA 3,7,0,0,0,0,112,128,255,255,0,255,127,63,143,48,192,240,0,0,0,0,30,1,255,254,0,248,240,224,128,0: ' barca
10050 DATA 0,0,0,0,0,0,0,0,0,0,0,0,0,42,85,42,0,0,0,0,0,0,0,0,0,0,0,0,0,170,85,170
10060 DATA 0,0,0,0,3,15,27,29,55,125,87,127,255,255,0,0,0,0,0,0,0,128,192,224,224,246,240,251,248,253,0,0
10070 DATA 1,2,5,5,5,5,5,11,11,23,23,23,47,47,95,255,128,64,160,160,160,160,160,208,208,208,232,232,244,250,250,255
10080 DATA 255,95,47,47,23,23,23,11,11,5,5,5,5,5,2,1,255,250,250,244,232,232,208,208,208,160,160,160,160,160,64,128
10090 DATA 0,0,6,24,37,88,131,36,164,130,88,39,16,7,0,0,0,0,192,24,228,26,133,32,37,197,26,228,24,96,0,0
10100 DATA 0,0,3,16,3,24,130,36,0,35,72,5,16,2,0,0,0,0,64,16,64,26,65,4,32,5,10,96,8,128,0,0
10110 DATA 63,118,124,27,39,121,110,126,54,28,33,62,127,109,63,14,92,248,116,142,254,190,246,254,196,56,236,254,126,182,62,124
10120 DATA 7,11,10,7,0,0,31,47,42,29,0,0,127,191,170,117,254,255,175,86,0,0,248,252,188,88,0,0,224,240,240,96
10130 DATA 0,1,10,16,33,42,2,8,48,65,13,32,32,26,1,0,0,128,88,4,0,88,132,0,146,34,36,64,4,72,144,0
10140 DATA 0,8,18,0,36,0,20,66,8,34,0,5,16,5,0,0,0,128,32,4,138,64,20,130,64,20,32,4,0,16,64,0
10150 DATA 0,0,0,7,15,29,27,21,63,63,119,111,87,238,222,253,0,0,0,0,128,192,224,224,240,248,192,184,124,238,223,255
10160 DATA 253,222,238,87,111,119,63,63,21,27,29,15,7,0,0,0,255,223,238,124,184,192,248,240,224,224,192,128,0,0,0,0
10220 'end
